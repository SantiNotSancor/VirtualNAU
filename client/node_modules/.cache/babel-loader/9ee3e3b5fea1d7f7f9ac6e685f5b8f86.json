{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\OneDrive\\\\Escritorio\\\\fabrica\\\\client\\\\src\\\\Menu\\\\deliverTask.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState, useEffect } from 'react';\nimport { ModalOpener } from './modalOpener';\nimport { Request } from '../textInputs';\nimport Form from 'react-bootstrap/Form';\nimport image from './Images/DeliverTask.svg';\nimport moment from 'moment';\nimport Axios from 'axios';\nimport Table from 'react-bootstrap/Table';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Checkbox from 'react-bootstrap';\nimport { ModalPrototype } from '../modal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport class DeliverTask extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      task: '',\n      quantity: '',\n      money: '',\n      weight: '',\n      completed: false,\n      error: false,\n      showObsModal: false,\n      calification: '',\n      observation: ''\n    };\n\n    this.changeValue = (state, val) => {\n      this.setState({\n        [state]: val\n      });\n    };\n\n    this.myForm = () => {\n      return /*#__PURE__*/_jsxDEV(Form, {\n        className: \"toPrint\",\n        children: [/*#__PURE__*/_jsxDEV(Request, {\n          toShow: \"name\",\n          onChange: element => {\n            this.setState({\n              name: element\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(TaskRequest, {\n          name: this.state.name,\n          onChange: (data, task, error, completed) => {\n            this.setState({\n              task,\n              quantity: data.quantity,\n              money: data.money,\n              weight: data.weight,\n              error,\n              completed\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.post = () => {\n      Axios.post('http://localhost:3001/newPart', {\n        task: this.state.task,\n        date: moment(new Date()).format('DD/MM/YYYY'),\n        quantity: this.state.quantity,\n        weight: Number(this.state.weight).toFixed(1),\n        money: Number(this.state.money).toFixed(1)\n      }).then(() => {\n        if (this.state.completed) this.setState({\n          showObsModal: true\n        });\n      });\n    };\n\n    this.getObservation = () => {\n      Axios.put(\"http://localhost:3001/printObs\", {\n        id: this.state.task,\n        observations: this.state.observation,\n        calification: this.state.calification\n      }); //Axios.delete(`http://localhost:3001/deleteTask/${this.state.task}`);\n\n      this.setState({\n        showObsModal: false\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ModalOpener, {\n        buttonText: \"Recibir tarea\",\n        children: this.myForm(),\n        logo: image,\n        className: \"title\",\n        footer: {\n          label: 'Imprimir',\n          func: () => {\n            window.print();\n          },\n          show: document.getElementById(\"taskTable\")\n        },\n        title: \"Ingreso de tarea\",\n        post: this.post,\n        error: this.state.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ModalPrototype, {\n        show: this.state.showObsModal,\n        post: this.getObservation,\n        title: \"Calificar\",\n        handleClose: () => this.setState({\n          showObsModal: false\n        }),\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Request, {\n            toShow: \"observation\",\n            onChange: e => this.setState({\n              observation: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Request, {\n            toShow: \"calification\",\n            onChange: e => this.setState({\n              calification: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}\nexport const TaskRequest = _ref => {\n  _s();\n\n  let {\n    onChange,\n    name\n  } = _ref;\n  const [tasks, setTasks] = useState([]);\n  const [title, setTitle] = useState('Elegir tarea');\n  const [parts, setParts] = useState([]);\n  const [input, setInput] = useState({\n    quantity: 0,\n    weight: 0,\n    money: 0\n  });\n  const [selectedTask, setSelectedTask] = useState('');\n  const [refund, setRefund] = useState(false);\n  useEffect(() => {\n    if (name === '') return;\n    Axios.post('http://localhost:3001/getTasks', {\n      name,\n      complete: 0\n    }).then(response => {\n      if (response.data.length === 0) return;\n      setTasks(response.data);\n    });\n  }, [name]);\n  useEffect(() => {\n    Axios.post('http://localhost:3001/getParts', {\n      task: selectedTask.id\n    }).then(response => setParts(response.data));\n    setInput({\n      quantity: 0,\n      weight: 0,\n      money: 0\n    });\n  }, [selectedTask]);\n  useEffect(() => {\n    let delivered = input.quantity;\n    parts.map(part => {\n      delivered += part.quantity;\n    });\n    onChange(input, selectedTask.id, input.quantity > 0 && input.weight > 0 && input.money >= 0, delivered === selectedTask.quantity);\n  }, [input]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const inputField = (property, total) => {\n    return /*#__PURE__*/_jsxDEV(FormControl, {\n      value: input[property],\n      onChange: e => {\n        if (isNaN(e.target.value) || total[property] < e.target.value) return;\n        let aux = { ...input\n        };\n        aux[property] = e.target.value;\n        if (property === 'quantity' && refund) aux[property] *= -1;else aux[property] = aux[property] < 0 ? 0 : aux[property];\n        if (property === 'quantity') aux[property] = Math.round(aux[property]);\n        setInput({ ...aux\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this);\n  };\n\n  const getTable = () => {\n    let total = {\n      quantity: selectedTask.quantity,\n      weight: selectedTask.weight,\n      money: selectedTask.quantity * selectedTask.price\n    };\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [parts.map((part, index) => {\n        total = {\n          quantity: total.quantity - part.quantity,\n          weight: total.weight - part.weight,\n          money: total.money - part.money\n        };\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: part.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: part.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: total.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: Number(part.weight).toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: Number(total.weight).toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: '$' + Number(part.money).toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: '$' + Number(total.money).toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: moment(new Date()).format('DD/MM/YYYY')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: inputField('quantity', total)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: total.quantity - input.quantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: inputField('weight', total)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: (total.weight - input.weight).toFixed(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: inputField('money', total)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: '$' + (total.money - input.money).toFixed(1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  };\n\n  const getExceeded = () => {\n    //Devuelve true si se excedió la fecha de entrega\n    if (!selectedTask.deadline) return;\n    let today = new Date();\n    let aux = selectedTask.deadline;\n    var dateParts = aux.split(\"/\");\n    var deadline = new Date(+dateParts[2], dateParts[1] - 1, +dateParts[0]);\n    return today > deadline ? true : false;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        'justifyContent': 'space-between',\n        'display': 'flex',\n        'alignItems': 'baseline'\n      },\n      children: [/*#__PURE__*/_jsxDEV(DropdownButton, {\n        title: title,\n        onSelect: e => {\n          setTitle('T' + tasks[e].id + ': ' + tasks[e].article_id + ' (' + tasks[e].article_description + ') x' + tasks[e].quantity + ' a $' + tasks[e].price);\n          setSelectedTask(tasks[e]);\n        },\n        children: tasks.map((task, index) => {\n          return /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            eventKey: index,\n            children: task.id + ': ' + task.article_id + ' (' + task.article_description + ') x' + task.quantity + ' a $' + task.price\n          }, task.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 29\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          'color': getExceeded() ? 'red' : 'green'\n        },\n        children: selectedTask === '' ? null : selectedTask.deadline\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }, this), title === 'Elegir tarea' ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Table, {\n        striped: true,\n        bordered: true,\n        id: \"taskTable\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Fecha\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Cantidad entregada\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Cantidad total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Peso entregado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Peso total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Dinero entregado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Dinero total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: selectedTask.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: selectedTask.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: selectedTask.weight\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: '$' + selectedTask.price * selectedTask.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 29\n          }, this), getTable()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Form.Check, {\n        onChange: () => {\n          setRefund(!refund);\n        },\n        label: \"Devoluci\\xF3n o correcci\\xF3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(TaskRequest, \"jU4LjI7kL8lfn02ZKiFK13vcyfg=\");\n\n_c = TaskRequest;\n\nvar _c;\n\n$RefreshReg$(_c, \"TaskRequest\");","map":{"version":3,"sources":["C:/Users/PC/OneDrive/Escritorio/fabrica/client/src/Menu/deliverTask.js"],"names":["React","Component","useState","useEffect","ModalOpener","Request","Form","image","moment","Axios","Table","FormControl","Dropdown","DropdownButton","Checkbox","ModalPrototype","DeliverTask","state","task","quantity","money","weight","completed","error","showObsModal","calification","observation","changeValue","val","setState","myForm","element","name","data","post","date","Date","format","Number","toFixed","then","getObservation","put","id","observations","render","label","func","window","print","show","document","getElementById","e","target","value","TaskRequest","onChange","tasks","setTasks","title","setTitle","parts","setParts","input","setInput","selectedTask","setSelectedTask","refund","setRefund","complete","response","length","delivered","map","part","inputField","property","total","isNaN","aux","Math","round","getTable","price","index","getExceeded","deadline","today","dateParts","split","article_id","article_description"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from 'react';\r\nimport { ModalOpener } from './modalOpener';\r\nimport { Request } from '../textInputs';\r\nimport Form from 'react-bootstrap/Form';\r\nimport image from './Images/DeliverTask.svg';\r\nimport moment from 'moment';\r\nimport Axios from 'axios';\r\nimport Table from 'react-bootstrap/Table';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport DropdownButton from 'react-bootstrap/DropdownButton';\r\nimport Checkbox from 'react-bootstrap';\r\n\r\nimport { ModalPrototype } from '../modal';\r\n\r\n\r\nexport class DeliverTask extends Component {\r\n    state = {\r\n        task: '',\r\n        quantity: '',\r\n        money: '',\r\n        weight: '',\r\n        completed: false,\r\n        error: false,\r\n        showObsModal: false,\r\n        calification: '',\r\n        observation: ''\r\n    }\r\n\r\n    changeValue = (state, val) => {\r\n        this.setState({ [state]: val });\r\n    }\r\n\r\n    myForm = () => {\r\n        return (\r\n            <Form className=\"toPrint\">\r\n                <Request toShow=\"name\" onChange={(element) => {\r\n                    this.setState({ name: element });\r\n                }} />\r\n                <TaskRequest name={this.state.name} onChange={(data, task, error, completed) => {\r\n                    this.setState({ task, quantity: data.quantity, money: data.money, weight: data.weight, error, completed });\r\n                }} />\r\n            </Form>\r\n        );\r\n    }\r\n\r\n    post = () => {\r\n        Axios.post('http://localhost:3001/newPart',\r\n            {\r\n                task: this.state.task, date: moment(new Date()).format('DD/MM/YYYY'), quantity: this.state.quantity,\r\n                weight: Number(this.state.weight).toFixed(1), money: Number(this.state.money).toFixed(1)\r\n            }).then(() => {\r\n                if (this.state.completed)\r\n                    this.setState({ showObsModal: true });\r\n            });\r\n    }\r\n\r\n    getObservation = () => {\r\n        Axios.put(\"http://localhost:3001/printObs\",\r\n            { id: this.state.task, observations: this.state.observation, calification: this.state.calification });\r\n        //Axios.delete(`http://localhost:3001/deleteTask/${this.state.task}`);\r\n        this.setState({ showObsModal: false })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <ModalOpener buttonText=\"Recibir tarea\" children={this.myForm()} logo={image} className=\"title\"\r\n                    footer={{ label: 'Imprimir', func: () => { window.print() }, show: document.getElementById(\"taskTable\") }}\r\n                    title=\"Ingreso de tarea\" post={this.post} error={this.state.error} />\r\n                {/*Crea un botón que abre a un modal en el que aparecerá lo devuelto en this.myForm*/}\r\n\r\n                <ModalPrototype show={this.state.showObsModal} post={this.getObservation} title=\"Calificar\"\r\n                    handleClose={() => this.setState({ showObsModal: false })}>\r\n                    <>\r\n                        <Request toShow=\"observation\" onChange={(e) => this.setState({ observation: e.target.value })} />\r\n                        <Request toShow=\"calification\" onChange={(e) => this.setState({ calification: e.target.value })} />\r\n                    </>\r\n                </ModalPrototype>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport const TaskRequest = ({ onChange, name }) => {\r\n\r\n    const [tasks, setTasks] = useState([]);\r\n    const [title, setTitle] = useState('Elegir tarea');\r\n    const [parts, setParts] = useState([]);\r\n    const [input, setInput] = useState({ quantity: 0, weight: 0, money: 0 });\r\n    const [selectedTask, setSelectedTask] = useState('');\r\n    const [refund, setRefund] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (name === '')\r\n            return;\r\n        Axios.post('http://localhost:3001/getTasks', { name, complete: 0 }).then((response) => {\r\n            if (response.data.length === 0)\r\n                return;\r\n            setTasks(response.data);\r\n        })\r\n    }, [name]);\r\n\r\n    useEffect(() => {\r\n        Axios.post('http://localhost:3001/getParts', { task: selectedTask.id }).then((response) =>\r\n            setParts(response.data)\r\n        );\r\n        setInput({ quantity: 0, weight: 0, money: 0 });\r\n    }, [selectedTask]);\r\n\r\n    useEffect(() => {\r\n        let delivered = input.quantity;\r\n        parts.map((part) => { delivered += part.quantity; });\r\n        onChange(input, selectedTask.id,\r\n            (input.quantity > 0 && input.weight > 0 && input.money >= 0), (delivered === selectedTask.quantity));\r\n    }, [input]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n    const inputField = (property, total) => {\r\n        return (\r\n            <FormControl value={input[property]} onChange={(e) => {\r\n\r\n                if (isNaN(e.target.value) || total[property] < e.target.value)\r\n                    return;\r\n                let aux = { ...input };\r\n                aux[property] = e.target.value;\r\n                if(property === 'quantity' && refund)\r\n                    aux[property] *= -1\r\n                else\r\n                    aux[property] = (aux[property] < 0) ? 0 : aux[property];\r\n                if (property === 'quantity')\r\n                    aux[property] = Math.round(aux[property]);\r\n                setInput({ ...aux });\r\n            }} />\r\n        );\r\n    }\r\n\r\n    const getTable = () => {\r\n\r\n        let total = {\r\n            quantity: selectedTask.quantity,\r\n            weight: selectedTask.weight,\r\n            money: selectedTask.quantity * selectedTask.price\r\n        };\r\n        return (\r\n            <>\r\n                {parts.map((part, index) => {\r\n                    total = {\r\n                        quantity: total.quantity - part.quantity,\r\n                        weight: total.weight - part.weight,\r\n                        money: total.money - part.money\r\n                    };\r\n\r\n                    return (\r\n                        <tr key={index}>{/*Muestra el medio*/}\r\n                            <td>{part.date}</td>\r\n                            <td>{part.quantity}</td>\r\n                            <td>{total.quantity}</td>\r\n                            <td>{Number(part.weight).toFixed(1)}</td>\r\n                            <td>{Number(total.weight).toFixed(1)}</td>\r\n                            <td>{'$' + Number(part.money).toFixed(1)}</td>\r\n                            <td>{'$' + Number(total.money).toFixed(1)}</td>\r\n                        </tr>\r\n                    );\r\n                })}\r\n                <tr>{/*Muestra la última fila*/}\r\n                    <td>{moment(new Date()).format('DD/MM/YYYY')}</td>\r\n                    <td>{inputField('quantity', total)}</td>\r\n                    <td>{total.quantity - input.quantity}</td>\r\n                    <td>{inputField('weight', total)}</td>\r\n                    <td>{(total.weight - input.weight).toFixed(1)}</td>\r\n                    <td>{inputField('money', total)}</td>\r\n                    <td>{'$' + (total.money - input.money).toFixed(1)}</td>\r\n                </tr>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const getExceeded = () => {//Devuelve true si se excedió la fecha de entrega\r\n        if (!selectedTask.deadline)\r\n            return;\r\n        let today = new Date();\r\n        let aux = selectedTask.deadline;\r\n        var dateParts = aux.split(\"/\");\r\n        var deadline = new Date(+dateParts[2], dateParts[1] - 1, +dateParts[0]);\r\n        return (today > deadline) ? true : false;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={{ 'justifyContent': 'space-between', 'display': 'flex', 'alignItems': 'baseline' }}>\r\n                <DropdownButton title={title} onSelect={(e) => {\r\n                    setTitle('T' + tasks[e].id + ': ' + tasks[e].article_id + ' (' + tasks[e].article_description + ') x' + tasks[e].quantity + ' a $' + tasks[e].price);\r\n                    setSelectedTask(tasks[e]);\r\n                }}>\r\n                    {tasks.map((task, index) => {\r\n                        return (\r\n                            <Dropdown.Item key={task.id} eventKey={index}>\r\n                                {task.id + ': ' + task.article_id + ' (' + task.article_description + ') x' + task.quantity + ' a $' + task.price}\r\n                            </Dropdown.Item>\r\n                        );\r\n                    })}\r\n                </DropdownButton>\r\n                <h4 style={{ 'color': getExceeded() ? 'red' : 'green' }}>\r\n                    {(selectedTask === '') ? null : selectedTask.deadline}\r\n                </h4>\r\n            </div>\r\n            {title === 'Elegir tarea' ? <></> :\r\n                <>\r\n                    <Table striped bordered id=\"taskTable\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Fecha</th>\r\n                                <th>Cantidad entregada</th>\r\n                                <th>Cantidad total</th>\r\n                                <th>Peso entregado</th>\r\n                                <th>Peso total</th>\r\n                                <th>Dinero entregado</th>\r\n                                <th>Dinero total</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>{/*Muestra el primero*/}\r\n                                <td>{selectedTask.date}</td>\r\n                                <td></td>\r\n                                <td>{selectedTask.quantity}</td>\r\n                                <td></td>\r\n                                <td>{selectedTask.weight}</td>\r\n                                <td></td>\r\n                                <td>{'$' + selectedTask.price * selectedTask.quantity}</td>\r\n                            </tr>\r\n                            {getTable()}\r\n                        </tbody>\r\n                    </Table>\r\n                    <Form.Check onChange={()=>{setRefund(!refund)}} label=\"Devolución o corrección\"/>\r\n                </>\r\n            }\r\n        </>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}